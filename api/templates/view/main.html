<!-- Template for global view of BFTList -->

{% include "view/head.html" %}
<body>
    <h1>BFTList global view</h1>
    <p>Another day, another algorithm</p>
    <button id="refreshButton">Refresh view</button>

    <div class="nodes-container">
    {% for item in data %}
        <div class="node-wrapper">
            <div class="node">
                <p>Node {{ item.node.id }}</p>
                <p>Hostname {{ item.node.hostname }}</p>
                <p>IP:port {{ item.node.ip }}:{{ item.node.port }}</p></p>
                <span id=refreshLabel{{ item.node.id }}>Refreshing node data..</span>
            </div>
            
            <div class="data" id="data-node-{{ item.node.id }}">
                <p>Phases: 
                {% for phs in item.data.VIEW_ESTABLISHMENT_MODULE.phs %}
                    {% if item.node.id == (loop.index - 1) %}
                        <b><u>{{ phs }}</u></b>
                    {% else %}
                        {{ phs }}
                    {% endif %}
                {% endfor %}
                </p>
                <p>Views: 
                {% for v in item.data.VIEW_ESTABLISHMENT_MODULE.views %}
                    {% if item.node.id == (loop.index - 1) %}
                        <b><u>[{{ v.current }},{{ v.next }}]</u></b>
                    {% else %}
                        [{{ v.current }},{{ v.next }}]
                    {% endif %}
                {% endfor %}
                </p>
                <p>vChange: {{ item.data.VIEW_ESTABLISHMENT_MODULE.vChange }}</p>
                <p>Witnesses: 
                {% for w in item.data.VIEW_ESTABLISHMENT_MODULE.witnesses %}
                    {% if item.node.id == (loop.index - 1) %}
                        <b><u>{{ w }}</u></b>
                    {% else %}
                        {{ w }}
                    {% endif %}
                {% endfor %}

            </div>
        </div>
    {% endfor %}
    </div>

    {% include "view/scripts.html" %}
</body>