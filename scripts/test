#!/bin/bash

function run_unit_tests() {
    echo "Running unit tests.."
    python3.7 -m unittest discover -s tests.unit_tests
    echo "Unit tests done!"
}

function run_integration_tests() {
    echo "Running integration tests.."
    python3.7 -m unittest discover -s tests.integration_tests
    echo "Integration tests done!"
}

function run_test_by_pattern() {
    python3.7 -m unittest discover -s tests -p $1
}

if [ $# -eq 0 ]; then
    # run all tests
    run_unit_tests
    run_integration_tests
elif [ $# -eq 1 ]; then
    # run either integration tests or unit tests
    if [ "$1" = "it" ]; then
        run_integration_tests
    elif [ "$1" = "unit" ]; then
        run_unit_tests
    else
        run_test_by_pattern $1
    fi
fi
